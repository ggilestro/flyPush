{% extends "base.html" %}
{% set active_page = "export" %}
{% block title %}Export{% endblock %}
{% block page_title %}Database Export{% endblock %}

{% block content %}
<div class="max-w-xl" x-data="{ loading: false, compress: false }">
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-sm font-semibold text-gray-700 mb-2">SQL Dump</h3>
        <p class="text-sm text-gray-500 mb-4">
            Download a full database dump using <code class="text-xs bg-gray-100 px-1 py-0.5 rounded">mariadb-dump</code>
            with <code class="text-xs bg-gray-100 px-1 py-0.5 rounded">--single-transaction</code> for a consistent snapshot.
        </p>
        <div class="flex items-center gap-3 mb-4">
            <input type="checkbox" x-model="compress" id="compress" class="rounded border-gray-300 text-amber-600 focus:ring-amber-500">
            <label for="compress" class="text-sm text-gray-700">Gzip compress</label>
        </div>
        <form method="post" :action="'/api/export/sql' + (compress ? '?compress=true' : '')"
              @submit="loading = true">
            <button type="submit" :disabled="loading"
                    class="px-5 py-2.5 bg-amber-600 text-white rounded text-sm font-medium hover:bg-amber-500 transition-colors disabled:opacity-50">
                <span x-show="!loading">Download SQL Dump</span>
                <span x-show="loading">Generating...</span>
            </button>
        </form>
    </div>
</div>
{% endblock %}
